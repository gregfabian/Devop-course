In Puppet's `exec` resource, the `onlyif` and `unless` attributes are used to control whether a command should be executed based on specific conditions.

**`onlyif` Attribute:**
The `onlyif` attribute specifies a test command that Puppet runs before the main command. If this test command returns an exit code of `0` (indicating success), Puppet proceeds to execute the main command. If the test command returns a non-zero exit code, the main command is skipped. This allows you to define conditions under which the main command should run. 

**`unless` Attribute:**
Conversely, the `unless` attribute also specifies a test command, but with opposite logic. If this test command returns an exit code of `0`, Puppet skips the main command. If the test command returns a non-zero exit code, Puppet executes the main command. This is useful for preventing the execution of the main command when certain conditions are met. 

**Key Differences:**
- **Execution Logic:**
  - `onlyif`: Executes the main command only if the test command succeeds (exit code `0`).
  - `unless`: Executes the main command only if the test command fails (non-zero exit code).

- **Purpose:**
  - `onlyif`: Use when you want the main command to run under specific successful conditions.
  - `unless`: Use when you want to prevent the main command from running under specific successful conditions.

**Example Usage:**

```puppet code example:
exec { 'example_with_onlyif':
  command => '/usr/bin/do_something',
  onlyif  => '/usr/bin/test -f /path/to/somefile',
}

exec { 'example_with_unless':
  command => '/usr/bin/do_something_else',
  unless  => '/usr/bin/test -f /path/to/anotherfile',
}
```

In the first `exec`, `/usr/bin/do_something` will run only if `/path/to/somefile` exists. In the second `exec`, `/usr/bin/do_something_else` will run only if `/path/to/anotherfile` does not exist.

It's important to note that both `onlyif` and `unless` test commands are evaluated during each Puppet run to determine whether the main command should be executed. This ensures that the desired state is maintained based on the specified conditions.  